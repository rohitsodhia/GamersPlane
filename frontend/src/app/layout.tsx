import SiteFooter from "./SiteFooter";
import SiteHeader from "./SiteHeader";
import "./globals.css";
import { agency_fb, open_sans } from "./util";
import { headers } from "next/headers";

export const metadata = {
    title: "Next.js",
    description: "Generated by Next.js",
};

export default async function RootLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    const referrer = (await headers()).get("referer") ?? "";
    let path = "";
    if (referrer) {
        const url = new URL(referrer);
        path = url.pathname;
    }
    let top_margin = "mt-[70px]",
        content_padding = "p-3 pt-5",
        tallHeader = false;
    if (["", "/"].includes(path)) {
        top_margin = "mt-[120px]";
        content_padding = "";
        tallHeader = true;
    }

    return (
        <html lang="en">
            <body
                className={`bg-body-black ${open_sans.className} ${agency_fb.variable}`}
            >
                <SiteHeader tallHeader={tallHeader} />
                <main className={`bg-white ${top_margin} ${content_padding}`}>
                    {children}
                </main>
                <SiteFooter />
            </body>
        </html>
    );
}
